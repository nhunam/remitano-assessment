{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(authenticate),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(create),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(logout),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(root);import{all,call,put,takeLatest}from\"redux-saga/effects\";import{ActionTypes}from\"actions/user/type\";import jwt_decode from\"jwt-decode\";import{request}from\"utils/client\";/**\n * Login\n */export function authenticate(param){var payload,response,token,user;return _regeneratorRuntime.wrap(function authenticate$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;payload=_objectSpread({method:\"POST\"},param);_context.next=4;return call(request,\"/token\",payload);case 4:response=_context.sent;token=response.token;user=jwt_decode(token);_context.next=9;return put({type:ActionTypes.USER_LOGIN_SUCCESS,payload:{token:token,email:user.email,id:user.id}});case 9:_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);_context.next=15;return put({type:ActionTypes.USER_LOGIN_FAILURE,payload:_context.t0});case 15:case\"end\":return _context.stop();}}},_marked,null,[[0,11]]);}/**\n * create\n */export function create(param){var _param$payload,email,password,payload;return _regeneratorRuntime.wrap(function create$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_param$payload=param.payload,email=_param$payload.email,password=_param$payload.password;_context2.prev=1;payload=_objectSpread({method:\"POST\"},param);_context2.next=5;return call(request,\"/users\",payload);case 5:_context2.next=7;return put({type:ActionTypes.USER_LOGIN,payload:{email:email,password:password}});case 7:_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);_context2.next=13;return put({type:ActionTypes.USER_LOGIN,payload:{email:email,password:password}});case 13:case\"end\":return _context2.stop();}}},_marked2,null,[[1,9]]);}/**\n * Logout\n */export function logout(){return _regeneratorRuntime.wrap(function logout$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return put({type:ActionTypes.USER_LOGOUT_SUCCESS});case 2:case\"end\":return _context3.stop();}}},_marked3);}/**\n * User Sagas\n */export default function root(){return _regeneratorRuntime.wrap(function root$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return all([takeLatest(ActionTypes.USER_LOGIN,authenticate),takeLatest(ActionTypes.USER_LOGOUT,logout),takeLatest(ActionTypes.USER_CREATE,create)]);case 2:case\"end\":return _context4.stop();}}},_marked4);}","map":{"version":3,"sources":["/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/src/sagas/user.js"],"names":["authenticate","create","logout","root","all","call","put","takeLatest","ActionTypes","jwt_decode","request","param","payload","method","response","token","user","type","USER_LOGIN_SUCCESS","email","id","USER_LOGIN_FAILURE","password","USER_LOGIN","USER_LOGOUT_SUCCESS","USER_LOGOUT","USER_CREATE"],"mappings":"sZASiBA,Y,iDAuBAC,M,iDAsBAC,M,iDASQC,I,EA/DzB,OAASC,GAAT,CAAcC,IAAd,CAAoBC,GAApB,CAAyBC,UAAzB,KAA2C,oBAA3C,CAEA,OAASC,WAAT,KAA4B,mBAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,OAASC,OAAT,KAAwB,cAAxB,CAEA;AACA;AACA,GACA,MAAO,SAAUV,CAAAA,YAAV,CAAuBW,KAAvB,uKAEGC,OAFH,gBAEeC,MAAM,CAAE,MAFvB,EAEkCF,KAFlC,kBAGc,MAAMN,CAAAA,IAAI,CAACK,OAAD,CAAU,QAAV,CAAoBE,OAApB,CAAV,CAHd,OAGGE,QAHH,eAIKC,KAJL,CAIeD,QAJf,CAIKC,KAJL,CAKGC,IALH,CAKUP,UAAU,CAACM,KAAD,CALpB,iBAOH,MAAMT,CAAAA,GAAG,CAAC,CACRW,IAAI,CAAET,WAAW,CAACU,kBADV,CAERN,OAAO,CAAE,CAAEG,KAAK,CAAEA,KAAT,CAAgBI,KAAK,CAAEH,IAAI,CAACG,KAA5B,CAAmCC,EAAE,CAAEJ,IAAI,CAACI,EAA5C,CAFD,CAAD,CAAT,CAPG,yGAaH,MAAMd,CAAAA,GAAG,CAAC,CACRW,IAAI,CAAET,WAAW,CAACa,kBADV,CAERT,OAAO,YAFC,CAAD,CAAT,CAbG,qEAoBP;AACA;AACA,GACA,MAAO,SAAUX,CAAAA,MAAV,CAAiBU,KAAjB,6KACuBA,KAAK,CAACC,OAD7B,CACGO,KADH,gBACGA,KADH,CACUG,QADV,gBACUA,QADV,kBAGGV,OAHH,gBAGeC,MAAM,CAAE,MAHvB,EAGkCF,KAHlC,mBAIH,MAAMN,CAAAA,IAAI,CAACK,OAAD,CAAU,QAAV,CAAoBE,OAApB,CAAV,CAJG,wBAMH,MAAMN,CAAAA,GAAG,CAAC,CACRW,IAAI,CAAET,WAAW,CAACe,UADV,CAERX,OAAO,CAAE,CAAEO,KAAK,CAAEA,KAAT,CAAgBG,QAAQ,CAAEA,QAA1B,CAFD,CAAD,CAAT,CANG,4GAYH,MAAMhB,CAAAA,GAAG,CAAC,CACRW,IAAI,CAAET,WAAW,CAACe,UADV,CAERX,OAAO,CAAE,CAAEO,KAAK,CAAEA,KAAT,CAAgBG,QAAQ,CAAEA,QAA1B,CAFD,CAAD,CAAT,CAZG,sEAmBP;AACA;AACA,GACA,MAAO,SAAUpB,CAAAA,MAAV,sIACL,MAAMI,CAAAA,GAAG,CAAC,CACRW,IAAI,CAAET,WAAW,CAACgB,mBADV,CAAD,CAAT,CADK,wDAMP;AACA;AACA,GACA,cAAe,SAAUrB,CAAAA,IAAV,oIACb,MAAMC,CAAAA,GAAG,CAAC,CACRG,UAAU,CAACC,WAAW,CAACe,UAAb,CAAyBvB,YAAzB,CADF,CAERO,UAAU,CAACC,WAAW,CAACiB,WAAb,CAA0BvB,MAA1B,CAFF,CAGRK,UAAU,CAACC,WAAW,CAACkB,WAAb,CAA0BzB,MAA1B,CAHF,CAAD,CAAT,CADa","sourcesContent":["import { all, call, put, takeLatest } from \"redux-saga/effects\";\n\nimport { ActionTypes } from \"actions/user/type\";\nimport jwt_decode from \"jwt-decode\";\nimport { request } from \"utils/client\";\n\n/**\n * Login\n */\nexport function* authenticate(param) {\n  try {\n    const payload = { method: \"POST\", ...param };\n    const response = yield call(request, \"/token\", payload);\n    const { token } = response;\n    const user = jwt_decode(token);\n\n    yield put({\n      type: ActionTypes.USER_LOGIN_SUCCESS,\n      payload: { token: token, email: user.email, id: user.id }\n    });\n  } catch (err) {\n    /* istanbul ignore next */\n    yield put({\n      type: ActionTypes.USER_LOGIN_FAILURE,\n      payload: err\n    });\n  }\n}\n\n/**\n * create\n */\nexport function* create(param) {\n  const { email, password } = param.payload;\n  try {\n    const payload = { method: \"POST\", ...param };\n    yield call(request, \"/users\", payload);\n\n    yield put({\n      type: ActionTypes.USER_LOGIN,\n      payload: { email: email, password: password }\n    });\n  } catch (err) {\n    /* istanbul ignore next */\n    yield put({\n      type: ActionTypes.USER_LOGIN,\n      payload: { email: email, password: password }\n    });\n  }\n}\n\n/**\n * Logout\n */\nexport function* logout() {\n  yield put({\n    type: ActionTypes.USER_LOGOUT_SUCCESS\n  });\n}\n\n/**\n * User Sagas\n */\nexport default function* root() {\n  yield all([\n    takeLatest(ActionTypes.USER_LOGIN, authenticate),\n    takeLatest(ActionTypes.USER_LOGOUT, logout),\n    takeLatest(ActionTypes.USER_CREATE, create)\n  ]);\n}\n"]},"metadata":{},"sourceType":"module"}