{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _possibleConstructorReturn from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _assertThisInitialized from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _wrapNativeSuper from\"/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";/**\n * Client\n * @module Client\n */import axios,{AxiosRequestConfig}from\"axios\";export var ServerError=/*#__PURE__*/function(_Error){_inherits(ServerError,_Error);var _super=_createSuper(ServerError);function ServerError(message){var _this;_classCallCheck(this,ServerError);_this=_super.call(this,message);Error.captureStackTrace(_assertThisInitialized(_this),ServerError);_this.name=\"ServerError\";return _possibleConstructorReturn(_this,_assertThisInitialized(_this));}return ServerError;}(/*#__PURE__*/_wrapNativeSuper(Error));export function parseError(error){return error||\"Something went wrong\";}/**\n * Fetch data\n *\n * @param {string} url\n * @param {Object} options\n * @param {string} [options.method] - Request method ( GET, POST, PUT, ... ).\n * @param {string} [options.payload] - Request body.\n * @param {Object} [options.headers]\n *\n * @returns {Promise}\n */export function request(url){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var config=_objectSpread({method:\"GET\"},options);var errors=[];if(!url){errors.push(\"url\");}if(!url.includes('youtube')){url='https://obscure-beach-46869.herokuapp.com'+url;}if(!config.payload&&config.method!==\"GET\"&&config.method!==\"DELETE\"){errors.push(\"payload\");}if(errors.length){throw new Error(\"Error! You must pass `\".concat(errors.join(\"`, `\"),\"`\"));}var headers=_objectSpread({accept:\"application/json\",\"Content-Type\":\"application/json\"},config.headers);var requestConfig={headers:headers,url:url,method:config.method,timeout:60000,withCredentials:true};if(requestConfig.method!==\"GET\"){requestConfig.data=JSON.stringify(config.payload);}return axios.request(requestConfig).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",response.data);case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(err){var response,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:response=err.response;error=new ServerError(response.statusText);error.status=response.status;_context2.next=5;return response.data;case 5:error.response=_context2.sent;throw error;case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());}","map":{"version":3,"sources":["/Users/nhunam/Desktop/Java/remitano/remitano/video-sharing-react/src/utils/client.js"],"names":["axios","AxiosRequestConfig","ServerError","message","Error","captureStackTrace","name","parseError","error","request","url","options","config","method","errors","push","includes","payload","length","join","headers","accept","requestConfig","timeout","withCredentials","data","JSON","stringify","then","response","catch","err","statusText","status"],"mappings":"2oDACA;AACA;AACA;AACA,GACA,MAAOA,CAAAA,KAAP,EAAgBC,kBAAhB,KAA0C,OAA1C,CAEA,UAAaC,CAAAA,WAAb,kGAGE,qBAAYC,OAAZ,CAAqC,6CACnC,uBAAMA,OAAN,EAEAC,KAAK,CAACC,iBAAN,+BAA8BH,WAA9B,EAEA,MAAKI,IAAL,CAAY,aAAZ,CAEA,uEACD,CAXH,mDAAiCF,KAAjC,GAcA,MAAO,SAASG,CAAAA,UAAT,CAAoBC,KAApB,CAA2C,CAChD,MAAOA,CAAAA,KAAK,EAAI,sBAAhB,CACD,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,SAASC,CAAAA,OAAT,CAAiBC,GAAjB,CAAgE,IAAlCC,CAAAA,OAAkC,2DAAhB,EAAgB,CAErE,GAAMC,CAAAA,MAAM,gBACVC,MAAM,CAAE,KADE,EAEPF,OAFO,CAAZ,CAIA,GAAMG,CAAAA,MAAM,CAAG,EAAf,CAEA,GAAI,CAACJ,GAAL,CAAU,CACRI,MAAM,CAACC,IAAP,CAAY,KAAZ,EACD,CACD,GAAI,CAACL,GAAG,CAACM,QAAJ,CAAa,SAAb,CAAL,CAA6B,CAC3BN,GAAG,CAAG,4CAA8CA,GAApD,CACD,CACD,GACE,CAACE,MAAM,CAACK,OAAR,EACAL,MAAM,CAACC,MAAP,GAAkB,KADlB,EAEAD,MAAM,CAACC,MAAP,GAAkB,QAHpB,CAIE,CACAC,MAAM,CAACC,IAAP,CAAY,SAAZ,EACD,CAED,GAAID,MAAM,CAACI,MAAX,CAAmB,CACjB,KAAM,IAAId,CAAAA,KAAJ,iCAAoCU,MAAM,CAACK,IAAP,CAAY,MAAZ,CAApC,MAAN,CACD,CAED,GAAMC,CAAAA,OAAO,gBACXC,MAAM,CAAE,kBADG,CAEX,eAAgB,kBAFL,EAGRT,MAAM,CAACQ,OAHC,CAAb,CAKA,GAAME,CAAAA,aAAiC,CAAG,CACxCF,OAAO,CAAPA,OADwC,CAExCV,GAAG,CAAHA,GAFwC,CAGxCG,MAAM,CAAED,MAAM,CAACC,MAHyB,CAIxCU,OAAO,CAAE,KAJ+B,CAKxCC,eAAe,CAAE,IALuB,CAA1C,CAQA,GAAIF,aAAa,CAACT,MAAd,GAAyB,KAA7B,CAAoC,CAClCS,aAAa,CAACG,IAAd,CAAqBC,IAAI,CAACC,SAAL,CAAef,MAAM,CAACK,OAAtB,CAArB,CACD,CACD,MAAOjB,CAAAA,KAAK,CACTS,OADI,CACIa,aADJ,EAEJM,IAFI,0FAEC,iBAAMC,QAAN,kJAAkBA,QAAQ,CAACJ,IAA3B,wDAFD,gEAGJK,KAHI,2FAGE,kBAAMC,GAAN,yIACGF,QADH,CACgBE,GADhB,CACGF,QADH,CAECrB,KAFD,CAEiB,GAAIN,CAAAA,WAAJ,CAAgB2B,QAAQ,CAACG,UAAzB,CAFjB,CAGLxB,KAAK,CAACyB,MAAN,CAAeJ,QAAQ,CAACI,MAAxB,CAHK,uBAIkBJ,CAAAA,QAAQ,CAACJ,IAJ3B,QAILjB,KAAK,CAACqB,QAJD,qBAKCrB,CAAAA,KALD,yDAHF,iEAAP,CAUD","sourcesContent":["// @flow\n/**\n * Client\n * @module Client\n */\nimport axios, { AxiosRequestConfig } from \"axios\";\n\nexport class ServerError extends Error {\n  response: Object;\n\n  constructor(message?: string): Error {\n    super(message);\n\n    Error.captureStackTrace(this, ServerError);\n\n    this.name = \"ServerError\";\n\n    return this;\n  }\n}\n\nexport function parseError(error: string): string {\n  return error || \"Something went wrong\";\n}\n\n/**\n * Fetch data\n *\n * @param {string} url\n * @param {Object} options\n * @param {string} [options.method] - Request method ( GET, POST, PUT, ... ).\n * @param {string} [options.payload] - Request body.\n * @param {Object} [options.headers]\n *\n * @returns {Promise}\n */\nexport function request(url: string, options: Object = {}): Promise<*> {\n  \n  const config = {\n    method: \"GET\",\n    ...options\n  };\n  const errors = [];\n\n  if (!url) {\n    errors.push(\"url\");\n  }\n  if (!url.includes('youtube')){\n    url = 'https://obscure-beach-46869.herokuapp.com' + url;\n  }  \n  if (\n    !config.payload &&\n    config.method !== \"GET\" &&\n    config.method !== \"DELETE\"\n  ) {\n    errors.push(\"payload\");\n  }\n\n  if (errors.length) {\n    throw new Error(`Error! You must pass \\`${errors.join(\"`, `\")}\\``);\n  }\n\n  const headers = {\n    accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n    ...config.headers\n  };\n  const requestConfig: AxiosRequestConfig = {\n    headers,\n    url,\n    method: config.method,\n    timeout: 60000,\n    withCredentials: true\n  };\n\n  if (requestConfig.method !== \"GET\") {\n    requestConfig.data = JSON.stringify(config.payload);\n  }\n  return axios\n    .request(requestConfig)\n    .then(async response => response.data)\n    .catch(async err => {\n      const { response } = err;\n      const error: Object = new ServerError(response.statusText);\n      error.status = response.status;\n      error.response = await response.data;\n      throw error;\n    });\n}\n"]},"metadata":{},"sourceType":"module"}